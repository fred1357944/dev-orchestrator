# Dev Orchestrator ç³»çµ±æ¶æ§‹è¨­è¨ˆ

## æ¦‚è¿°

Dev Orchestrator æ˜¯ä¸€å€‹æœ¬åœ°é–‹ç™¼ç’°å¢ƒç®¡ç†å·¥å…·ï¼Œç”¨æ–¼çµ±ä¸€ç®¡ç†å¤šå€‹é–‹ç™¼å°ˆæ¡ˆçš„ç«¯å£åˆ†é…ã€é€²ç¨‹æ§åˆ¶å’Œç‹€æ…‹ç›£æ§ã€‚æ”¯æ´ Claude AI å”ä½œï¼Œè®“ä½ å¯ä»¥ç”¨è‡ªç„¶èªè¨€æ“ä½œå°ˆæ¡ˆã€‚

## è¨­è¨ˆç›®æ¨™

| ç›®æ¨™ | èªªæ˜ |
|------|------|
| **çµ±ä¸€ç®¡ç†** | æ‰€æœ‰å°ˆæ¡ˆçš„ç«¯å£ã€ç‹€æ…‹ã€Log é›†ä¸­åœ¨ä¸€è™• |
| **é¿å…è¡çª** | è‡ªå‹•åˆ†é…ç«¯å£ï¼Œæœçµ•æ‰‹å‹•ç®¡ç†çš„æ··äº‚ |
| **ä¸€éµæ“ä½œ** | Dashboard æˆ– Claude æŒ‡ä»¤å³å¯å•Ÿå‹•/åœæ­¢å°ˆæ¡ˆ |
| **ä¼‘çœ å‹å¥½** | è“‹ä¸Šé›»è…¦å†æ‰“é–‹ï¼Œæœå‹™è‡ªå‹•æ¢å¾© |
| **å¯æ“´å±•** | å®¹æ˜“æ–°å¢å°ˆæ¡ˆï¼Œä¸éœ€è¦ä¿®æ”¹æ ¸å¿ƒç¨‹å¼ç¢¼ |

---

## ç³»çµ±åˆ†å±¤æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Layer 0: ä½œæ¥­ç³»çµ±å±¤                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   macOS     â”‚  â”‚  Terminal   â”‚  â”‚ PM2 Daemon  â”‚          â”‚
â”‚  â”‚  (ä¼‘çœ ç®¡ç†)  â”‚  â”‚  (æ‰‹å‹•æ“ä½œ) â”‚  â”‚  (å¸¸é§èƒŒæ™¯)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                Layer 1: Dev Orchestrator æœå‹™å±¤              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚     MCP Server       â”‚  â”‚  Streamlit Dashboard â”‚         â”‚
â”‚  â”‚  (Claude AI ä»‹é¢)    â”‚  â”‚    (Web UI ä»‹é¢)     â”‚         â”‚
â”‚  â”‚  Port: stdio         â”‚  â”‚    Port: 8501        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚             â”‚                         â”‚                      â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Core Services (Python)                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚PortManager  â”‚ â”‚ProjectRegistryâ”‚ â”‚ProcessControllerâ”‚ â”‚    â”‚
â”‚  â”‚  â”‚ (ç«¯å£åˆ†é…)  â”‚ â”‚ (å°ˆæ¡ˆè¨»å†Š)  â”‚ â”‚  (é€²ç¨‹æ§åˆ¶)   â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              projects.json (è³‡æ–™å±¤)                  â”‚    â”‚
â”‚  â”‚              å–®ä¸€çœŸå¯¦ä¾†æº (SSOT)                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Layer 2: è¢«ç®¡ç†çš„å°ˆæ¡ˆå±¤                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Project  â”‚ â”‚  Project  â”‚ â”‚  Project  â”‚ â”‚  Project  â”‚   â”‚
â”‚  â”‚  KRUSH    â”‚ â”‚ Food Map  â”‚ â”‚ Analyze   â”‚ â”‚   ...     â”‚   â”‚
â”‚  â”‚ FE: 3001  â”‚ â”‚ FE: 3002  â”‚ â”‚ FE: 3003  â”‚ â”‚           â”‚   â”‚
â”‚  â”‚ BE: 8001  â”‚ â”‚ BE: 8002  â”‚ â”‚ BE: 8003  â”‚ â”‚           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒçµ„ä»¶è¨­è¨ˆ

### 1. PortManagerï¼ˆç«¯å£ç®¡ç†å™¨ï¼‰

**è·è²¬**ï¼šåˆ†é…å’Œç®¡ç†ç«¯å£ï¼Œé¿å…è¡çª

**ç«¯å£åˆ†é…ç­–ç•¥**ï¼š
| é¡å‹ | ç¯„åœ | èªªæ˜ |
|------|------|------|
| Frontend | 3000-3099 | React, Vue, Streamlit ç­‰å‰ç«¯æœå‹™ |
| Backend | 8000-8099 | FastAPI, Flask, Express ç­‰å¾Œç«¯æœå‹™ |
| Reserved | 8501 | Dashboard æœ¬èº«ä½¿ç”¨ |
| Reserved | 9999 | é ç•™çµ¦æœªä¾†æ“´å±• |

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `find_available_port(start, end)` - åœ¨ç¯„åœå…§å°‹æ‰¾å¯ç”¨ç«¯å£
- `is_port_in_use(port)` - æª¢æŸ¥ç«¯å£æ˜¯å¦è¢«ä½”ç”¨ï¼ˆSocket æª¢æŸ¥ï¼‰
- `allocate_ports(project_name)` - ç‚ºå°ˆæ¡ˆåˆ†é…å‰å¾Œç«¯ç«¯å£
- `release_ports(project_name)` - é‡‹æ”¾å°ˆæ¡ˆçš„ç«¯å£

**é›™é‡æª¢æŸ¥æ©Ÿåˆ¶**ï¼š
1. æª¢æŸ¥ `projects.json` ä¸­çš„å·²åˆ†é…è¨˜éŒ„
2. ä½¿ç”¨ Socket æª¢æŸ¥ç³»çµ±å¯¦éš›ä½”ç”¨ç‹€æ…‹

---

### 2. ProjectRegistryï¼ˆå°ˆæ¡ˆè¨»å†Šè¡¨ï¼‰

**è·è²¬**ï¼šç®¡ç†å°ˆæ¡ˆé…ç½®çš„å–®ä¸€çœŸå¯¦ä¾†æº

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `list_projects()` - åˆ—å‡ºæ‰€æœ‰å°ˆæ¡ˆ
- `get_project(name)` - å–å¾—å–®ä¸€å°ˆæ¡ˆè©³æƒ…
- `register_project(config)` - è¨»å†Šæ–°å°ˆæ¡ˆ
- `update_project(name, config)` - æ›´æ–°å°ˆæ¡ˆé…ç½®
- `remove_project(name)` - ç§»é™¤å°ˆæ¡ˆ

**å°ˆæ¡ˆé…ç½®çµæ§‹**ï¼š
```
{
  name: å°ˆæ¡ˆåç¨±
  path: å°ˆæ¡ˆæ ¹ç›®éŒ„è·¯å¾‘
  frontend: { port, command, enabled }
  backend: { port, command, enabled }
  env_vars: { ç’°å¢ƒè®Šæ•¸ }
  created_at: å»ºç«‹æ™‚é–“
  tags: [åˆ†é¡æ¨™ç±¤]
}
```

---

### 3. ProcessControllerï¼ˆé€²ç¨‹æ§åˆ¶å™¨ï¼‰

**è·è²¬**ï¼šèˆ‡ PM2 äº’å‹•ï¼Œæ§åˆ¶å°ˆæ¡ˆé€²ç¨‹

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `start_project(name)` - å•Ÿå‹•å°ˆæ¡ˆï¼ˆå‰ç«¯+å¾Œç«¯ï¼‰
- `stop_project(name)` - åœæ­¢å°ˆæ¡ˆ
- `restart_project(name)` - é‡å•Ÿå°ˆæ¡ˆ
- `get_status(name)` - å–å¾—å°ˆæ¡ˆé‹è¡Œç‹€æ…‹
- `get_logs(name, lines)` - å–å¾—å°ˆæ¡ˆ Log
- `start_all()` / `stop_all()` - æ‰¹æ¬¡æ“ä½œ

**PM2 æ•´åˆ**ï¼š
- ä½¿ç”¨ `subprocess` å‘¼å« PM2 CLI
- è§£æ `pm2 jlist` JSON è¼¸å‡ºå–å¾—ç‹€æ…‹
- Log æª”æ¡ˆä½ç½®ï¼š`~/.pm2/logs/`

**ç‹€æ…‹å°æ‡‰**ï¼š
| PM2 ç‹€æ…‹ | é¡¯ç¤ºç‹€æ…‹ | é¡è‰² |
|----------|---------|------|
| online | Running | ğŸŸ¢ ç¶ è‰² |
| stopped | Stopped | âšª ç°è‰² |
| errored | Error | ğŸ”´ ç´…è‰² |
| ä¸å­˜åœ¨ | Not Started | âšª ç°è‰² |

---

### 4. MCP Serverï¼ˆAI ä»‹é¢ï¼‰

**è·è²¬**ï¼šè®“ Claude å¯ä»¥æ“ä½œ Dev Orchestrator

**å”è­°**ï¼šMCP stdio æ¨¡å¼ï¼ˆä¸éœ€è¦é¡å¤–ç«¯å£ï¼‰

**æš´éœ²çš„ Tools**ï¼š

| Tool åç¨± | åŠŸèƒ½ | åƒæ•¸ |
|-----------|------|------|
| `list_projects` | åˆ—å‡ºæ‰€æœ‰å°ˆæ¡ˆå’Œç‹€æ…‹ | ç„¡ |
| `start_project` | å•Ÿå‹•æŒ‡å®šå°ˆæ¡ˆ | name |
| `stop_project` | åœæ­¢æŒ‡å®šå°ˆæ¡ˆ | name |
| `allocate_project` | ç‚ºæ–°å°ˆæ¡ˆåˆ†é…ç«¯å£ | name, path, fe_cmd, be_cmd |
| `get_project_logs` | å–å¾—å°ˆæ¡ˆ Log | name, lines |
| `get_port_status` | æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…æ³ | ç„¡ |

**ä½¿ç”¨ç¯„ä¾‹**ï¼š
```
ç”¨æˆ¶ï¼šã€Œå¹«æˆ‘å•Ÿå‹• KRUSH å°ˆæ¡ˆã€
Claudeï¼šå‘¼å« start_project(name="krush")
å›æ‡‰ï¼šã€ŒKRUSH å·²å•Ÿå‹•ï¼Œå‰ç«¯ http://localhost:3001ï¼Œå¾Œç«¯ http://localhost:8001ã€
```

---

### 5. Streamlit Dashboardï¼ˆWeb UIï¼‰

**è·è²¬**ï¼šæä¾›è¦–è¦ºåŒ–æ“ä½œä»‹é¢

**é é¢çµæ§‹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš€ Dev Orchestrator                    [Start All] [Stop All] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ğŸ“¦ Projects                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ğŸŸ¢ KRUSH    â”‚ â”‚ âšª Food Map â”‚ â”‚ ğŸ”´ Analyze  â”‚       â”‚
â”‚  â”‚ FE: 3001   â”‚ â”‚ FE: 3002   â”‚ â”‚ FE: 3003   â”‚       â”‚
â”‚  â”‚ BE: 8001   â”‚ â”‚ BE: 8002   â”‚ â”‚ BE: 8003   â”‚       â”‚
â”‚  â”‚ [Stop]     â”‚ â”‚ [Start]    â”‚ â”‚ [Restart]  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ Logs: KRUSH                              [Refresh] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [2024-01-05 10:30:15] Server started on 8001   â”‚   â”‚
â”‚  â”‚ [2024-01-05 10:30:16] Connected to database    â”‚   â”‚
â”‚  â”‚ [2024-01-05 10:30:17] Ready to accept requests â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â• Add New Project                                     â”‚
â”‚  Name: [____________]  Path: [__________________]      â”‚
â”‚  FE Command: [____________]  BE Command: [__________] â”‚
â”‚  [Register Project]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è³‡æ–™æµç¨‹

### å•Ÿå‹•å°ˆæ¡ˆæµç¨‹

```
ç”¨æˆ¶é»æ“Š [Start] æˆ–èªªã€Œå•Ÿå‹• KRUSHã€
              â”‚
              â–¼
    Dashboard / MCP Server
              â”‚
              â–¼
    ProcessController.start_project("krush")
              â”‚
              â–¼
    ProjectRegistry.get_project("krush")
    â†’ å–å¾—ç«¯å£å’Œå•Ÿå‹•æŒ‡ä»¤
              â”‚
              â–¼
    åŸ·è¡Œ PM2 æŒ‡ä»¤ï¼š
    pm2 start "npm run dev" --name "krush-fe" -- --port 3001
    pm2 start "python main.py" --name "krush-be" -- --port 8001
              â”‚
              â–¼
    æ›´æ–°ç‹€æ…‹ï¼Œå›å ±çµæœ
```

### æ–°å¢å°ˆæ¡ˆæµç¨‹

```
ç”¨æˆ¶å¡«å¯«è¡¨å–®æˆ–èªªã€Œæ–°å¢å°ˆæ¡ˆ analyze_v2ã€
              â”‚
              â–¼
    PortManager.allocate_ports("analyze_v2")
    â†’ æƒæå·²ç”¨ç«¯å£
    â†’ Socket æª¢æŸ¥ç³»çµ±ä½”ç”¨
    â†’ åˆ†é… FE: 3004, BE: 8004
              â”‚
              â–¼
    ProjectRegistry.register_project({
      name: "analyze_v2",
      frontend: { port: 3004, command: "..." },
      backend: { port: 8004, command: "..." }
    })
              â”‚
              â–¼
    å¯«å…¥ projects.json
              â”‚
              â–¼
    ï¼ˆå¯é¸ï¼‰ç”Ÿæˆ .env æª”æ¡ˆåˆ°å°ˆæ¡ˆç›®éŒ„
```

---

## æŠ€è¡“é¸å‹ç†ç”±

| é¸æ“‡ | æ›¿ä»£æ–¹æ¡ˆ | é¸æ“‡ç†ç”± |
|------|---------|---------|
| **JSON æª”æ¡ˆ** | SQLite | å¯è®€æ€§é«˜ã€æ˜“æ–¼æ‰‹å‹•ç·¨è¼¯ã€é©åˆå°è¦æ¨¡ |
| **PM2** | supervisord, è‡ªè£½ | æˆç†Ÿç©©å®šã€å…§å»º Logã€è·¨å¹³å°ã€æ´»èºç¶­è­· |
| **Streamlit** | Flask+React, Gradio | å¿«é€Ÿé–‹ç™¼ã€Python åŸç”Ÿã€è¶³å¤ ç¾è§€ |
| **MCP stdio** | MCP HTTP | ç°¡å–®ã€ä¸éœ€é¡å¤–ç«¯å£ã€Claude åŸç”Ÿæ”¯æ´ |
| **Python** | Node.js, Go | ä½ ç†Ÿæ‚‰ã€ç”Ÿæ…‹è±å¯Œã€MCP SDK å®Œæ•´ |

---

## ç›®éŒ„çµæ§‹

```
.dev-orchestrator/
â”œâ”€â”€ docs/                          # è¨­è¨ˆæ–‡ä»¶
â”‚   â”œâ”€â”€ ARCHITECTURE.md           # æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ API_SPEC.md               # API è¦æ ¼
â”‚   â”œâ”€â”€ DATA_SCHEMA.md            # è³‡æ–™çµæ§‹
â”‚   â””â”€â”€ IMPLEMENTATION_PLAN.md    # å¯¦ä½œè¨ˆç•«
â”‚
â”œâ”€â”€ src/                           # åŸå§‹ç¢¼
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒé‚è¼¯
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ port_manager.py       # ç«¯å£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ project_registry.py   # å°ˆæ¡ˆè¨»å†Š
â”‚   â”‚   â””â”€â”€ process_controller.py # é€²ç¨‹æ§åˆ¶
â”‚   â”‚
â”‚   â”œâ”€â”€ mcp_server/               # MCP Server
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ server.py
â”‚   â”‚
â”‚   â””â”€â”€ dashboard/                # Streamlit UI
â”‚       â””â”€â”€ app.py
â”‚
â”œâ”€â”€ data/                          # è³‡æ–™æª”æ¡ˆ
â”‚   â””â”€â”€ projects.json             # å°ˆæ¡ˆè¨»å†Šè¡¨
â”‚
â”œâ”€â”€ logs/                          # æ‡‰ç”¨ Logï¼ˆéå°ˆæ¡ˆ Logï¼‰
â”‚
â”œâ”€â”€ ecosystem.config.js            # PM2 é…ç½®
â”œâ”€â”€ requirements.txt               # Python ä¾è³´
â””â”€â”€ README.md                      # ä½¿ç”¨èªªæ˜
```

---

## å®‰å…¨è€ƒé‡

| é¢¨éšª | ç·©è§£æªæ–½ |
|------|---------|
| ä»»æ„å‘½ä»¤åŸ·è¡Œ | åªå…è¨±åŸ·è¡Œå·²è¨»å†Šçš„å°ˆæ¡ˆæŒ‡ä»¤ |
| è·¯å¾‘ç©¿è¶Š | é©—è­‰å°ˆæ¡ˆè·¯å¾‘åœ¨å…è¨±çš„ç›®éŒ„å…§ |
| ç«¯å£è€—ç›¡ | è¨­å®šç«¯å£ç¯„åœä¸Šé™ï¼Œæä¾›æ¸…ç†æ©Ÿåˆ¶ |
| Log æ´©æ¼ | Dashboard åªåœ¨æœ¬åœ°é‹è¡Œï¼Œä¸æš´éœ²åˆ°ç¶²è·¯ |

---

## æœªä¾†æ“´å±•

1. **Docker æ”¯æ´**ï¼šé™¤äº† PM2ï¼Œä¹Ÿæ”¯æ´ Docker Compose å°ˆæ¡ˆ
2. **é ç«¯å°ˆæ¡ˆ**ï¼šæ”¯æ´ SSH é€£ç·šç®¡ç†é ç«¯é–‹ç™¼æ©Ÿ
3. **å°ˆæ¡ˆæ¨¡æ¿**ï¼šä¸€éµå»ºç«‹å¸¸ç”¨å°ˆæ¡ˆçµæ§‹
4. **è³‡æºç›£æ§**ï¼šCPUã€è¨˜æ†¶é«”ä½¿ç”¨é‡è¿½è¹¤
5. **ä¾è³´ç®¡ç†**ï¼šå°ˆæ¡ˆé–“ä¾è³´é—œä¿‚å’Œå•Ÿå‹•é †åº
